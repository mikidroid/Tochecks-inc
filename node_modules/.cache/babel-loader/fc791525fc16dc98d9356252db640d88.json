{"ast":null,"code":"import { colorToHsl, getHslAnimationFromHsl } from \"../../Utils/ColorUtils\";\nimport { randomInRange } from \"../../Utils/NumberUtils\";\nfunction updateColorValue(delta, value, valueAnimation, max, decrease) {\n  var _a;\n  const colorValue = value;\n  if (!colorValue || !valueAnimation.enable) {\n    return;\n  }\n  const offset = randomInRange(valueAnimation.offset);\n  const velocity = ((_a = value.velocity) !== null && _a !== void 0 ? _a : 0) * delta.factor + offset * 3.6;\n  if (!decrease || colorValue.status === 0) {\n    colorValue.value += velocity;\n    if (decrease && colorValue.value > max) {\n      colorValue.status = 1;\n      colorValue.value -= colorValue.value % max;\n    }\n  } else {\n    colorValue.value -= velocity;\n    if (colorValue.value < 0) {\n      colorValue.status = 0;\n      colorValue.value += colorValue.value;\n    }\n  }\n  if (colorValue.value > max) {\n    colorValue.value %= max;\n  }\n}\nfunction updateColor(particle, delta) {\n  var _a, _b, _c;\n  const animationOptions = particle.options.color.animation;\n  if (((_a = particle.color) === null || _a === void 0 ? void 0 : _a.h) !== undefined) {\n    updateColorValue(delta, particle.color.h, animationOptions.h, 360, false);\n  }\n  if (((_b = particle.color) === null || _b === void 0 ? void 0 : _b.s) !== undefined) {\n    updateColorValue(delta, particle.color.s, animationOptions.s, 100, true);\n  }\n  if (((_c = particle.color) === null || _c === void 0 ? void 0 : _c.l) !== undefined) {\n    updateColorValue(delta, particle.color.l, animationOptions.l, 100, true);\n  }\n}\nexport class ColorUpdater {\n  constructor(container) {\n    this.container = container;\n  }\n  init(particle) {\n    const hslColor = colorToHsl(particle.options.color, particle.id, particle.options.reduceDuplicates);\n    if (hslColor) {\n      particle.color = getHslAnimationFromHsl(hslColor, particle.options.color.animation, this.container.retina.reduceFactor);\n    }\n  }\n  isEnabled(particle) {\n    var _a, _b, _c;\n    const animationOptions = particle.options.color.animation;\n    return !particle.destroyed && !particle.spawning && (((_a = particle.color) === null || _a === void 0 ? void 0 : _a.h.value) !== undefined && animationOptions.h.enable || ((_b = particle.color) === null || _b === void 0 ? void 0 : _b.s.value) !== undefined && animationOptions.s.enable || ((_c = particle.color) === null || _c === void 0 ? void 0 : _c.l.value) !== undefined && animationOptions.l.enable);\n  }\n  update(particle, delta) {\n    updateColor(particle, delta);\n  }\n}","map":null,"metadata":{},"sourceType":"module"}